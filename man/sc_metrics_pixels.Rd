% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sc_metrics_pixels.R
\name{sc_metrics_pixels}
\alias{sc_metrics_pixels}
\title{Pixel-level supercells metrics}
\usage{
sc_metrics_pixels(
  x,
  sc,
  metrics = c("spatial", "value", "combined", "balance"),
  scale = TRUE,
  step,
  compactness,
  dist_fun = NULL
)
}
\arguments{
\item{x}{The input SpatRaster used to create \code{sc}.}

\item{sc}{An sf object returned by \code{\link[=sc_slic]{sc_slic()}}.}

\item{metrics}{Character vector of metrics to return. Options:
\code{"spatial"}, \code{"value"}, \code{"combined"}, \code{"balance"}.
Default: \code{c("spatial", "value", "combined", "balance")}.}

\item{scale}{Logical. If \code{TRUE}, returns \code{spatial} and \code{value} as scaled
distances (\code{spatial_scaled}, \code{value_scaled}).}

\item{step}{A step value used for the supercells
If missing, uses \code{attr(sc, "step")} when available}

\item{compactness}{A compactness value used for the supercells
If missing, uses \code{attr(sc, "compactness")} when available}

\item{dist_fun}{A distance function name or function, as in \code{\link[=sc_slic]{sc_slic()}}.
If missing or \code{NULL}, uses \code{attr(sc, "dist_fun")} when available.}
}
\value{
A SpatRaster with one or more layers depending on \code{metrics}.
Interpretation:
\describe{
\item{spatial}{Lower values indicate more compact supercells.}
\item{value}{Lower values indicate more homogeneous supercells.}
\item{combined}{Overall distance; mainly useful for ranking.}
\item{balance}{0 indicates balance; negative values indicate spatial dominance;
positive values indicate value dominance.}
}
Metrics:
\describe{
\item{spatial}{Spatial distance from each pixel to its supercell center
in grid-cell units (row/column index distance). If the input supercells were
created with \code{step = in_meters(...)}, distances are reported in meters.}
\item{value}{Value distance from each pixel to its supercell center in
the raster value space.}
\item{combined}{Combined distance using \code{compactness} and \code{step}.}
\item{balance}{Signed log ratio of scaled value distance to scaled
spatial distance; 0 indicates balance. Always computed from scaled components.}
}
When \code{scale = TRUE}, \code{spatial} and \code{value} are returned as
\code{spatial_scaled} and \code{value_scaled}.
}
\description{
Computes per-pixel distance diagnostics from each pixel to its supercell center
}
\details{
If \code{sc} lacks \code{supercells}, \code{x}, or \code{y} columns, they are derived from geometry
and row order, which may differ from the original centers.
When using SLIC0 (set \code{compactness = "auto"} in \code{\link[=sc_slic]{sc_slic()}}), combined and balance metrics use per-supercell
adaptive compactness (SLIC0), and scaled value distances are computed with the
per-supercell max value distance.
}
\examples{
library(supercells)
vol = terra::rast(system.file("raster/volcano.tif", package = "supercells"))
vol_sc = sc_slic(vol, step = 8, compactness = 7)
metrics = sc_metrics_pixels(vol, vol_sc, scale = TRUE)
terra::panel(metrics, nr = 1)
}
\seealso{
\code{\link[=sc_slic]{sc_slic()}}, \code{\link[=sc_metrics_supercells]{sc_metrics_supercells()}}, \code{\link[=sc_metrics_global]{sc_metrics_global()}}
}
