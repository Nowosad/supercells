% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sc_metrics_global.R
\name{sc_metrics_global}
\alias{sc_metrics_global}
\title{Global supercells metrics}
\usage{
sc_metrics_global(
  x,
  sc,
  metrics = c("spatial", "value", "combined", "balance"),
  scale = TRUE,
  step,
  compactness,
  dist_fun = NULL
)
}
\arguments{
\item{x}{The input SpatRaster used to create \code{sc}.}

\item{sc}{An sf object returned by \code{\link[=sc_slic]{sc_slic()}}.}

\item{metrics}{Character vector of metric ideas to return. Options:
\code{"spatial"}, \code{"value"}, \code{"combined"}, \code{"balance"}. Default:
\code{c("spatial", "value", "combined", "balance")}.}

\item{scale}{Logical. If \code{TRUE}, scales spatial and value distances; output
columns are named with the \verb{_scaled} suffix.}

\item{step}{A step value used for the supercells
If missing, uses \code{attr(sc, "step")} when available}

\item{compactness}{A compactness value used for the supercells
If missing, uses \code{attr(sc, "compactness")} when available.
Compactness mode is read from \code{attr(sc, "compactness_method")} when available.}

\item{dist_fun}{A distance function name or function, as in \code{\link[=sc_slic]{sc_slic()}}.
If missing or \code{NULL}, uses \code{attr(sc, "dist_fun")} when available.}
}
\value{
A data.frame with a single row of global metrics and columns:
Interpretation:
\describe{
\item{mean_value_dist}{Lower values indicate more homogeneous supercells.}
\item{mean_spatial_dist}{Lower values indicate more compact supercells.}
\item{mean_combined_dist}{Overall distance; mainly useful for ranking.}
\item{balance}{0 indicates balance between value and spatial terms; negative
values indicate spatial dominance; positive values indicate value dominance.}
}
\describe{
\item{step}{Step size used to generate supercells. Returned in meters when
the input used \code{step = use_meters(...)}, otherwise in cells.}
\item{compactness}{Compactness value used to generate supercells; \code{NA} for
adaptive compactness.}
\item{compactness_method}{Compactness method: \code{"constant"} for fixed
compactness, \code{"local_max"} for adaptive compactness.}
\item{n_supercells}{Number of supercells with at least one non-missing pixel.}
\item{mean_value_dist}{Mean per-supercell value distance from cells to their
supercell centers, averaged across supercells. Returned as \code{mean_value_dist}
(or \code{mean_value_dist_scaled} when \code{scale = TRUE}).}
\item{mean_spatial_dist}{Mean per-supercell spatial distance from cells to
their supercell centers, averaged across supercells; units are grid cells
(row/column index distance). If the input supercells were created with
\code{step = use_meters(...)}, distances are reported in meters. Returned as
\code{mean_spatial_dist} (or \code{mean_spatial_dist_scaled} when \code{scale = TRUE}).}
\item{mean_combined_dist}{Mean per-supercell combined distance, computed from
value and spatial distances using \code{compactness} and \code{step}, averaged across
supercells. Returned as \code{mean_combined_dist}.}
\item{balance}{Mean signed log ratio of scaled value distance to scaled
spatial distance (averaged across supercells); 0 indicates balance.}
}
When \code{scale = TRUE}, \code{mean_spatial_dist} and \code{mean_value_dist} are returned as
\code{mean_spatial_dist_scaled} and \code{mean_value_dist_scaled}.
}
\description{
Computes global distance diagnostics for supercells
}
\details{
Requires \code{sc} with metadata columns (\code{supercells}, \code{x}, \code{y}).
If they are missing, they are derived from geometry and row order.
Use \code{outcomes = c("supercells", "coordinates", "values")} when calling
\code{sc_slic()} or \code{supercells()} to preserve original centers and IDs.
Metrics are averaged across supercells (each supercell has equal weight).
When using SLIC0 (set \code{compactness = use_adaptive()} in \code{\link[=sc_slic]{sc_slic()}}), combined and balance metrics use per-supercell
adaptive compactness (SLIC0), and scaled value distances are computed with the
per-supercell max value distance.
}
\examples{
library(supercells)
vol = terra::rast(system.file("raster/volcano.tif", package = "supercells"))
vol_sc = sc_slic(vol, step = 8, compactness = 7)
sc_metrics_global(vol, vol_sc)
}
\seealso{
\code{\link[=sc_slic]{sc_slic()}}, \code{\link[=sc_metrics_pixels]{sc_metrics_pixels()}}, \code{\link[=sc_metrics_supercells]{sc_metrics_supercells()}}
}
