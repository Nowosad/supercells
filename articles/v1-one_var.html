<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Supercells of a single raster layer • supercells</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Supercells of a single raster layer">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">supercells</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Version 2.0</h6></li>
    <li><a class="dropdown-item" href="../articles/v2-changes-since-v1.html">Main changes since version 1.0.0</a></li>
    <li><a class="dropdown-item" href="../articles/v2-intro.html">Introduction to supercells</a></li>
    <li><a class="dropdown-item" href="../articles/v2-parameters.html">Choosing parameters for supercells</a></li>
    <li><a class="dropdown-item" href="../articles/v2-evaluation.html">Evaluation and diagnostics</a></li>
    <li><a class="dropdown-item" href="../articles/v2-benchmarks.html">Benchmarks</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Version 1.0</h6></li>
    <li><a class="dropdown-item" href="../articles/v1-main-function.html">The supercells() function</a></li>
    <li><a class="dropdown-item" href="../articles/v1-benchmarks.html">Benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/v1-one_var.html">Superpixels of a single raster layer</a></li>
    <li><a class="dropdown-item" href="../articles/v1-rgb_vars.html">Superpixels of an RGB raster</a></li>
    <li><a class="dropdown-item" href="../articles/v1-motifels.html">Superpixels of spatial categorical patterns</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Nowosad/supercells/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Supercells of a single raster layer</h1>
                        <h4 data-toc-skip class="author">Jakub
Nowosad</h4>
            
            <h4 data-toc-skip class="date">2026-02-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Nowosad/supercells/blob/1.9/vignettes/articles/v1-one_var.Rmd" class="external-link"><code>vignettes/articles/v1-one_var.Rmd</code></a></small>
      <div class="d-none name"><code>v1-one_var.Rmd</code></div>
    </div>

    
    
<blockquote>
<p><strong>Version note:</strong> This vignette documents the
<code><a href="../reference/supercells.html">supercells()</a></code> interface as it existed in version 1.0 of the
package. Some arguments, defaults, and behaviors may differ in newer
releases. For up-to-date details, see <code><a href="../reference/sc_slic.html">?sc_slic</a></code> and the
current reference docs.</p>
</blockquote>
<p>Superpixels are a collection of segmentation concepts of grouping
pixels with similar characteristics. In this package, we refer to them
as supercells. It is often used in computer vision to delineate parts of
RGB images that are more meaningful and easier to analyze. When applied
to RGB images, each superpixel contains similar colors that also could
represent real-world objects. A large number of methods for creating
superpixels were developed in the last decades, with the SLIC algorithm
(Achanta et al. (2012), <a href="doi:10.1109/TPAMI.2012.120" class="uri">doi:10.1109/TPAMI.2012.120</a>) being the most
prominent.</p>
<p>The <strong>supercells</strong> package aims to utilize the concept
of supercells for a variety of spatial data. This package works on
spatial data with one variable (e.g., continuous raster), many variables
(e.g., RGB rasters), and spatial patterns (e.g., areas in categorical
rasters). Therefore, it enables not only to find areas that look similar
on an RGB (satellite) image, but also to regionalize areas with
comparable values of one or more variables.</p>
<p>This vignette shows how to use the <strong>supercells</strong>
package on a single raster layer. To reproduce the following results on
your own computer, install and attach the packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jakubnowosad.com/supercells/">supercells</a></span><span class="op">)</span>    <span class="co"># supercells for spatial data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span>         <span class="co"># spatial raster data reading and handling</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>            <span class="co"># spatial vector data reading and handling</span></span></code></pre></div>
<div class="section level2">
<h2 id="default-arguments">Default arguments<a class="anchor" aria-label="anchor" href="#default-arguments"></a>
</h2>
<p>The first step is to read the input data. Here, we are going to use
<code>volcano.tif</code> example data that is already included in the
<strong>supercells</strong> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span> <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"raster/volcano.tif"</span>, package <span class="op">=</span> <span class="st">"supercells"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">vol</span><span class="op">)</span></span></code></pre></div>
<p><img src="v1-one_var_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" alt="" width="480"></p>
<p>It contains a digital elevation model for the Maunga Whau volcano,
where each value represents an elevation above sea level.</p>
<p>The <strong>supercells</strong> package can be used here to delineate
areas with similar elevations. It has one main function,
<code><a href="../reference/supercells.html">supercells()</a></code>, which expects at least three arguments:</p>
<ul>
<li>
<code>x</code> - an input raster (an object of class SpatRaster from
the <strong>terra</strong> package)</li>
<li>
<code>k</code> - an expected number of supercells</li>
<li>
<code>compactness</code> - a compactness value. Larger values create
more compact/even (square) supercells</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol_slic1</span> <span class="op">=</span> <span class="fu"><a href="../reference/supercells.html">supercells</a></span><span class="op">(</span><span class="va">vol</span>, k <span class="op">=</span> <span class="fl">50</span>, compactness <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">vol_slic1</span></span></code></pre></div>
<p>The <code><a href="../reference/supercells.html">supercells()</a></code> output is an <code>sf</code> object,
where each row represents a single superpixel. It stores supercell ids
(<code>supercells</code>), coordinates of the supercell centers
(<code>x</code> and <code>y</code>), and an average of all of the input
variables (<code>elevation</code> in this case).</p>
<p>It allows us to plot the supercells’ borders on top of the input
raster data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">vol</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">vol_slic1</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, lwd <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></code></pre></div>
<p><img src="v1-one_var_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" alt="" width="480"></p>
<p>The <code>vol_slic1</code> object can be a final result of the
analysis or used for further grouping or clustering.</p>
</div>
<div class="section level2">
<h2 id="customized-arguments">Customized arguments<a class="anchor" aria-label="anchor" href="#customized-arguments"></a>
</h2>
<p>The <code><a href="../reference/supercells.html">supercells()</a></code> function also has a set of optional
arguments, including:</p>
<ul>
<li>
<code>step</code> - a distance (in the number of cells) between
initial superpixel’ centers. It can be used instead of
<code>k</code>
</li>
<li>
<code>dist_fun</code> - a distance function used to calculate
similarities between raster values</li>
<li>
<code>clean</code> - should connectivity of the supercell be
enforced? If <code>FALSE</code>, then some supercells could consist of
several nonadjacent regions. It is <code>TRUE</code> by default.</li>
<li>
<code>iter</code> - a number of iterations performed to create the
output. It is <code>10</code> by default.</li>
</ul>
<p>Let’s try to change the values of some of them:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol_slic2</span> <span class="op">=</span> <span class="fu"><a href="../reference/supercells.html">supercells</a></span><span class="op">(</span><span class="va">vol</span>, step <span class="op">=</span> <span class="fl">11</span>, compactness <span class="op">=</span> <span class="fl">1</span>, dist_fun <span class="op">=</span> <span class="st">"euclidean"</span>, </span>
<span>                       clean <span class="op">=</span> <span class="cn">FALSE</span>, iter <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>The output still has the same structure (is an <code>sf</code> object
with supercell ids, coordinates of their centers, and an average of all
of the input variables), but has a slightly different number of
supercells, and their borders are a bit different.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">vol</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">vol_slic2</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, lwd <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></code></pre></div>
<p><img src="v1-one_var_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" alt="" width="480"></p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-achanta2012slic" class="csl-entry">
Achanta, Radhakrishna, Appu Shaji, Kevin Smith, Aurelien Lucchi, Pascal
Fua, and Sabine Süsstrunk. 2012. <span>“SLIC Superpixels Compared to
State-of-the-Art Superpixel Methods.”</span> <em>IEEE Transactions on
Pattern Analysis and Machine Intelligence</em> 34 (11): 2274–82.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jakub Nowosad.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
