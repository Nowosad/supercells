<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Evaluation and diagnostics • supercells</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Evaluation and diagnostics">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">supercells</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Version 2.0</h6></li>
    <li><a class="dropdown-item" href="../articles/v2-changes-since-v1.html">Main changes since version 1.0.0</a></li>
    <li><a class="dropdown-item" href="../articles/v2-intro.html">Introduction to supercells</a></li>
    <li><a class="dropdown-item" href="../articles/v2-parameters.html">Choosing parameters for supercells</a></li>
    <li><a class="dropdown-item" href="../articles/v2-evaluation.html">Evaluation and diagnostics</a></li>
    <li><a class="dropdown-item" href="../articles/v2-benchmarks.html">Benchmarks</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Version 1.0</h6></li>
    <li><a class="dropdown-item" href="../articles/v1-main-function.html">The supercells() function</a></li>
    <li><a class="dropdown-item" href="../articles/v1-benchmarks.html">Benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/v1-one_var.html">Superpixels of a single raster layer</a></li>
    <li><a class="dropdown-item" href="../articles/v1-rgb_vars.html">Superpixels of an RGB raster</a></li>
    <li><a class="dropdown-item" href="../articles/v1-motifels.html">Superpixels of spatial categorical patterns</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Nowosad/supercells/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Evaluation and diagnostics</h1>
                        <h4 data-toc-skip class="author">Jakub
Nowosad</h4>
            
            <h4 data-toc-skip class="date">2026-02-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Nowosad/supercells/blob/1.9/vignettes/articles/v2-evaluation.Rmd" class="external-link"><code>vignettes/articles/v2-evaluation.Rmd</code></a></small>
      <div class="d-none name"><code>v2-evaluation.Rmd</code></div>
    </div>

    
    
<p>This vignette shows how to evaluate supercells and interpret the
diagnostics. The metrics quantify spatial compactness, value
homogeneity, and their balance.</p>
<p>The metrics are derived from the same combined distance used during
segmentation:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><msqrt><mrow><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><msub><mi>d</mi><mi>s</mi></msub><mtext mathvariant="normal">step</mtext></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>+</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><msub><mi>d</mi><mi>v</mi></msub><mi>c</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">
D = \sqrt{\left(\frac{d_s}{\text{step}}\right)^2 + \left(\frac{d_v}{c}\right)^2}
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mi>s</mi></msub><annotation encoding="application/x-tex">d_s</annotation></semantics></math>
is the spatial distance in grid-cell units,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mi>v</mi></msub><annotation encoding="application/x-tex">d_v</annotation></semantics></math>
is the value-space distance defined by <code>dist_fun</code>, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>c</mi><annotation encoding="application/x-tex">c</annotation></semantics></math>
is <code>compactness</code>.
<!-- When `compactness = use_adaptive()`, $c$ becomes a per-center value scale computed as the maximum value distance within a local $2 \times \text{step}$ window. --></p>
<p>All examples use the <code>volcano</code> raster for simplicity, but
the same workflow applies to multi-layer rasters.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jakubnowosad.com/supercells/">supercells</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">vol</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"raster/volcano.tif"</span>, package <span class="op">=</span> <span class="st">"supercells"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">vol_sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_slic.html">sc_slic</a></span><span class="op">(</span><span class="va">vol</span>, step <span class="op">=</span> <span class="fl">8</span>, compactness <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="pixel-metrics">Pixel metrics<a class="anchor" aria-label="anchor" href="#pixel-metrics"></a>
</h2>
<p>Pixel metrics provide a map of distances from each pixel to its
supercell center. They are useful for diagnosing local failures, such as
areas where the supercells are too large or too irregular. Pixel metrics
are provided with the <code><a href="../reference/sc_metrics_pixels.html">sc_metrics_pixels()</a></code> function, which
accepts the original raster and the supercell polygons<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;This function reads supercells parameters internally
from the &lt;code&gt;supercell&lt;/code&gt; object, so it does not require the
&lt;code&gt;step&lt;/code&gt;, &lt;code&gt;compactness&lt;/code&gt;, or &lt;code&gt;dist_fun&lt;/code&gt;
arguments&lt;/p&gt;"><sup>1</sup></a>, and returns a
multi-layer raster with the requested metrics.</p>
<p>The pixel metrics include four layers<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Use the &lt;code&gt;metrics&lt;/code&gt; argument to request a
subset of metrics&lt;/p&gt;"><sup>2</sup></a>, each with a specific
interpretation and a simple definition:</p>
<ol style="list-style-type: decimal">
<li>
<code>spatial</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mi>s</mi></msub><annotation encoding="application/x-tex">d_s</annotation></semantics></math>,
the distance from each pixel to its supercell center in grid-cell units
(unless the input supercells were created with
<code>step = use_meters(...)</code>, in which case distances are
reported in map units). Lower spatial values indicate cells that are
closer to the center and more compact supercells, while higher values
indicate cells that are farther from the center and may indicate
irregular shapes or outliers.</li>
<li>
<code>value</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mi>v</mi></msub><annotation encoding="application/x-tex">d_v</annotation></semantics></math>,
the distance from each pixel to its supercell center in the value space
defined by your <code>dist_fun</code>. Lower value distances indicate
more homogeneous supercells, while higher values indicate more
heterogeneous supercells or outliers.</li>
<li>
<code>combined</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><msqrt><mrow><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mi>s</mi></msub><mi>/</mi><mtext mathvariant="normal">step</mtext><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>+</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mi>v</mi></msub><mi>/</mi><mi>c</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">D = \sqrt{\left(d_s/\text{step}\right)^2 + \left(d_v/c\right)^2}</annotation></semantics></math>,
the combined distance used to assign pixels to centers. This is mainly
useful for ranking pixels or supercells within a single run – it is not
directly comparable across runs with different parameters or distance
functions.</li>
<li>
<code>balance</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><msub><mi>d</mi><mi>v</mi></msub><mi>/</mi><mi>c</mi></mrow><mrow><msub><mi>d</mi><mi>s</mi></msub><mi>/</mi><mtext mathvariant="normal">step</mtext></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\log\left(\frac{d_v/c}{d_s/\text{step}}\right)</annotation></semantics></math>,
the signed log ratio of scaled value to scaled spatial distance.
Negative values indicate spatial dominance and positive values indicate
value dominance.</li>
</ol>
<p>By default, <code><a href="../reference/sc_metrics_pixels.html">sc_metrics_pixels()</a></code> returns
<code>spatial</code>, <code>value</code>, <code>combined</code>, and
<code>balance</code>, and uses <code>scale = TRUE</code>. With scaling
on, the spatial and value layers are returned as
<code>spatial_scaled</code> and <code>value_scaled</code>. Scaling
divides spatial distance by <code>step</code> (or by <code>step</code>
in map units) and value distance by <code>compactness</code> (or by
per-supercell values for SLIC0). This makes the spatial and value
components comparable and keeps the balance metric interpretable. If you
want raw units, set <code>scale = FALSE</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pixel_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_metrics_pixels.html">sc_metrics_pixels</a></span><span class="op">(</span><span class="va">vol</span>, <span class="va">vol_sc</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pixel_metrics</span>, nc <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="v2-evaluation_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level2">
<h2 id="supercell-metrics">Supercell metrics<a class="anchor" aria-label="anchor" href="#supercell-metrics"></a>
</h2>
<p>Metrics on the supercell level summarize each polygon with a single
value for each metric. They are useful for quality screening, outlier
detection, or joining metrics to attributes. They are calculated with
the <code><a href="../reference/sc_metrics_supercells.html">sc_metrics_supercells()</a></code> function, which accepts the
original raster and the supercell polygons, and returns an
<code>sf</code> object with one row per supercell and the requested
metrics as columns.</p>
<p>The supercell metrics include four variables, each with a specific
interpretation and definition as per-supercell means:</p>
<ol style="list-style-type: decimal">
<li>
<code>mean_spatial_dist</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><msub><mi>d</mi><mi>s</mi></msub><mo accent="true">¯</mo></mover><annotation encoding="application/x-tex">\overline{d_s}</annotation></semantics></math>,
the average spatial distance from pixels to the supercell center. Lower
values indicate more compact shapes.</li>
<li>
<code>mean_value_dist</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><msub><mi>d</mi><mi>v</mi></msub><mo accent="true">¯</mo></mover><annotation encoding="application/x-tex">\overline{d_v}</annotation></semantics></math>,
the average value distance from pixels to the supercell center in the
value space defined by <code>dist_fun</code>. Lower values indicate more
homogeneous supercells.</li>
<li>
<code>mean_combined_dist</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>D</mi><mo accent="true">¯</mo></mover><annotation encoding="application/x-tex">\overline{D}</annotation></semantics></math>,
the average combined distance within each supercell.</li>
<li>
<code>balance</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><mover><msub><mi>d</mi><mi>v</mi></msub><mo accent="true">¯</mo></mover><mi>/</mi><mi>c</mi></mrow><mrow><mover><msub><mi>d</mi><mi>s</mi></msub><mo accent="true">¯</mo></mover><mi>/</mi><mtext mathvariant="normal">step</mtext></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\log\left(\frac{\overline{d_v}/c}{\overline{d_s}/\text{step}}\right)</annotation></semantics></math>,
the signed log ratio of scaled distances.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">supercell_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_metrics_supercells.html">sc_metrics_supercells</a></span><span class="op">(</span><span class="va">vol</span>, <span class="va">vol_sc</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">supercell_metrics</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 2667400 ymin: 6479045 xmax: 2667500 ymax: 6479575</span></span>
<span><span class="co">#&gt; Projected CRS: NZGD49 / New Zealand Map Grid</span></span>
<span><span class="co">#&gt;   supercells mean_spatial_dist_scaled mean_value_dist_scaled mean_combined_dist</span></span>
<span><span class="co">#&gt; 1          1                0.4195350             0.08554244          0.4325501</span></span>
<span><span class="co">#&gt; 2          2                0.4539066             0.04427186          0.4587638</span></span>
<span><span class="co">#&gt; 3          3                0.4003193             0.14495014          0.4452615</span></span>
<span><span class="co">#&gt; 4          4                0.4570244             0.14389321          0.4939813</span></span>
<span><span class="co">#&gt; 5          5                0.4450208             0.31268263          0.5773152</span></span>
<span><span class="co">#&gt; 6          6                0.4680141             0.20287698          0.5398852</span></span>
<span><span class="co">#&gt;      balance                       geometry</span></span>
<span><span class="co">#&gt; 1 -1.5901344 POLYGON ((2667400 6479575, ...</span></span>
<span><span class="co">#&gt; 2 -2.3275422 POLYGON ((2667400 6479495, ...</span></span>
<span><span class="co">#&gt; 3 -1.0158726 POLYGON ((2667440 6479415, ...</span></span>
<span><span class="co">#&gt; 4 -1.1556654 POLYGON ((2667460 6479345, ...</span></span>
<span><span class="co">#&gt; 5 -0.3529323 POLYGON ((2667460 6479265, ...</span></span>
<span><span class="co">#&gt; 6 -0.8358987 POLYGON ((2667450 6479175, ...</span></span></code></pre></div>
<p>The output is an <code>sf</code> object with one row per supercell
and the metrics as columns. You can map any metric by plotting a single
column.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">supercell_metrics</span><span class="op">)</span></span></code></pre></div>
<p><img src="v2-evaluation_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level2">
<h2 id="global-metrics">Global metrics<a class="anchor" aria-label="anchor" href="#global-metrics"></a>
</h2>
<p>Global metrics provide a single-row summary and are best for
comparing different outputs or parameter settings. They are calculated
with <code><a href="../reference/sc_metrics_global.html">sc_metrics_global()</a></code>, which accepts the original raster
and the supercell polygons and returns a <code>data.frame</code>. In
these metrics, each supercell contributes equally to the global
averages.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;If you want to weight by area or number of pixels, you
can use the supercell-level metrics and calculate your own weighted
averages. Also, let us know if you want a built-in option for weighted
global metrics.&lt;/p&gt;"><sup>3</sup></a></p>
<p>The global metrics include the same four distance summaries as the
supercell metrics, averaged across supercells (each supercell has equal
weight):</p>
<ol style="list-style-type: decimal">
<li>
<code>mean_spatial_dist</code>: the mean of per-supercell
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><msub><mi>d</mi><mi>s</mi></msub><mo accent="true">¯</mo></mover><annotation encoding="application/x-tex">\overline{d_s}</annotation></semantics></math>.
Lower values indicate more compact shapes.</li>
<li>
<code>mean_value_dist</code>: the mean of per-supercell
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><msub><mi>d</mi><mi>v</mi></msub><mo accent="true">¯</mo></mover><annotation encoding="application/x-tex">\overline{d_v}</annotation></semantics></math>
in the value space defined by <code>dist_fun</code>. Lower values
indicate more homogeneous supercells.</li>
<li>
<code>mean_combined_dist</code>: the mean of per-supercell
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>D</mi><mo accent="true">¯</mo></mover><annotation encoding="application/x-tex">\overline{D}</annotation></semantics></math>,
useful for ranking or comparing runs.</li>
<li>
<code>balance</code>:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><mover><msub><mi>d</mi><mi>v</mi></msub><mo accent="true">¯</mo></mover><mi>/</mi><mi>c</mi></mrow><mrow><mover><msub><mi>d</mi><mi>s</mi></msub><mo accent="true">¯</mo></mover><mi>/</mi><mtext mathvariant="normal">step</mtext></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mo accent="true">¯</mo></mover><annotation encoding="application/x-tex">\overline{\log\left(\frac{\overline{d_v}/c}{\overline{d_s}/\text{step}}\right)}</annotation></semantics></math>,
the mean of per-supercell balance values.</li>
</ol>
<p>By default, <code><a href="../reference/sc_metrics_global.html">sc_metrics_global()</a></code> returns the scaled
distances. When <code>scale = TRUE</code>, the spatial and value
summaries are returned as <code>mean_spatial_dist_scaled</code> and
<code>mean_value_dist_scaled</code>. If you want raw units, set
<code>scale = FALSE</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">global_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_metrics_global.html">sc_metrics_global</a></span><span class="op">(</span><span class="va">vol</span>, <span class="va">vol_sc</span><span class="op">)</span></span>
<span><span class="va">global_metrics</span></span>
<span><span class="co">#&gt;   step compactness compactness_method n_supercells mean_spatial_dist_scaled</span></span>
<span><span class="co">#&gt; 1    8           7           constant           88                0.4718607</span></span>
<span><span class="co">#&gt;   mean_value_dist_scaled mean_combined_dist    balance</span></span>
<span><span class="co">#&gt; 1              0.3701397          0.6517259 -0.3367309</span></span></code></pre></div>
<p>You may use the global metrics to compare parameter settings, for
example by varying <code>step</code> or <code>compactness</code>.
However, remember to keep the same <code>dist_fun</code> that you used
for the supercell generation to make comparisons meaningful. Higher
compactness typically lowers spatial distances while increasing value
distances, so look for balanced tradeoffs rather than a single
minimum.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol_sc_low</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_slic.html">sc_slic</a></span><span class="op">(</span><span class="va">vol</span>, step <span class="op">=</span> <span class="fl">8</span>, compactness <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">metrics_higher</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_metrics_global.html">sc_metrics_global</a></span><span class="op">(</span><span class="va">vol</span>, <span class="va">vol_sc</span><span class="op">)</span></span>
<span><span class="va">metrics_lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sc_metrics_global.html">sc_metrics_global</a></span><span class="op">(</span><span class="va">vol</span>, <span class="va">vol_sc_low</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span>higher_compactness <span class="op">=</span> <span class="va">metrics_higher</span>, lower_compactness <span class="op">=</span> <span class="va">metrics_lower</span><span class="op">)</span></span>
<span><span class="co">#&gt;                    step compactness compactness_method n_supercells</span></span>
<span><span class="co">#&gt; higher_compactness    8           7           constant           88</span></span>
<span><span class="co">#&gt; lower_compactness     8           1           constant           90</span></span>
<span><span class="co">#&gt;                    mean_spatial_dist_scaled mean_value_dist_scaled</span></span>
<span><span class="co">#&gt; higher_compactness                0.4718607              0.3701397</span></span>
<span><span class="co">#&gt; lower_compactness                 0.5500066              2.1412253</span></span>
<span><span class="co">#&gt;                    mean_combined_dist    balance</span></span>
<span><span class="co">#&gt; higher_compactness          0.6517259 -0.3367309</span></span>
<span><span class="co">#&gt; lower_compactness           2.3003626  1.1923986</span></span></code></pre></div>
<p>When using <code>compactness = use_adaptive()</code>, the value
scaling is per-supercell. This improves local adaptation, but it also
means metrics are not directly comparable to fixed-compactness outputs.
In this case, you can still compare the spatial metrics, but the value
metrics will reflect the local scaling rather than the original value
distances.</p>
</div>
<div class="section level2">
<h2 id="feedback-and-related-tools">Feedback and related tools<a class="anchor" aria-label="anchor" href="#feedback-and-related-tools"></a>
</h2>
<p>We welcome feedback on the metric names, missing metrics, or the
overall function syntax – if you have suggestions for alternative
diagnostics or different summaries, <a href="https://github.com/Nowosad/supercells/issues" class="external-link">please let us
know</a>. For additional region-based measures, see the CRAN package
<strong>regional</strong> at <a href="https://cran.r-project.org/package=regional" class="external-link uri">https://cran.r-project.org/package=regional</a>.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jakub Nowosad.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
